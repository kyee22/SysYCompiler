image: adoptium/openjdk:17-jdk-hotspot

before_script:
  - apt-get update && apt-get install -y openjdk-17-jdk
  - export JAVA_HOME=/usr/lib/jvm/default-java

stages:
  - test

unit_tests:
  stage: test
  script:
    - java -version # 添加此行以检查 Java 版本
    - mkdir -p lab/Compiler/src/frontend/core lab/Compiler/src/utils lab/Compiler/test/java
    - cp -r ./src/* lab/Compiler/src/*
    - cp -r ./test/* lab/Compiler/test/*
    - javac -encoding UTF-8 lab/Compiler/src/frontend/core/*.java
    - javac -encoding UTF-8 lab/Compiler/src/utils/*.java
    - javac -encoding UTF-8 lab/Compiler/test/java/CompilerTest.java
    - java -cp lab/Compiler/test/java:lab/Compiler/src/frontend/core:lab/Compiler/src/utils org.junit.runner.JUnitCore CompilerTest